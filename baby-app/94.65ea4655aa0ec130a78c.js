"use strict";(self.webpackChunkbaby_app=self.webpackChunkbaby_app||[]).push([[94],{6094:(B,d,n)=>{n.r(d),n.d(d,{SettingsModule:()=>U});var p=n(8583),c=n(4655),r=n(3679),u=n(5257),g=n(5435),m=n(9773),f=n(8873),t=n(7716),h=n(3332),v=n(8613),b=n(2238),Z=n(262),w=n(9712),x=n(1073);const S=["box"],y=["passBox"];function C(e,i){if(1&e&&(t.ynx(0),t._UZ(1,"ae-input",14),t.BQk()),2&e){const s=t.oxw();t.xp6(1),t.Q6J("control",s.userFG.get("name"))}}function T(e,i){if(1&e&&(t.TgZ(0,"label"),t.TgZ(1,"span",7),t._uU(2,"Name"),t.qZA(),t.qZA(),t._UZ(3,"br"),t._uU(4)),2&e){const s=t.oxw();t.xp6(4),t.hij(" ",s.userFG.value.name," ")}}function A(e,i){1&e&&(t.TgZ(0,"p"),t._uU(1," Press the edit icon to change your password. "),t.qZA())}function G(e,i){if(1&e&&(t._UZ(0,"ae-input",15),t._UZ(1,"ae-input",16),t._UZ(2,"ae-input",17)),2&e){const s=t.oxw();t.Q6J("min",6)("control",s.passwordFG.get("password")),t.xp6(1),t.Q6J("min",6)("control",s.passwordFG.get("newPassword")),t.xp6(1),t.Q6J("min",6)("control",s.passwordFG.get("repeatPassword"))}}const M=[{path:"",component:(()=>{class e{constructor(s,o,a,l){this.fb=s,this.toastr=o,this.userService=a,this.dialog=l,this.userFG=this.fb.group({_id:a.user._id,name:[a.user.name,r.kI.required],email:a.user.email}),this.passwordFG=this.fb.group({_id:a.user._id,password:["",[r.kI.required,r.kI.minLength(6)]],newPassword:["",[r.kI.required,r.kI.minLength(6)]],repeatPassword:["",[r.kI.required,r.kI.minLength(6),this.samePassValidator()]]})}changePassword(){this.passwordFG.invalid||this.userService.changePassword(this.passwordFG.value).pipe((0,u.q)(1)).subscribe(()=>{this.passwordFG.reset({_id:this.userService.user._id}),this.passBox.exitEditState(),this.toastr.success("Password updated")})}saveProfile(){this.userFG.invalid||this.userService.update(this.userFG.value).pipe((0,u.q)(1)).subscribe(s=>{this.userFG.reset(s),this.box.exitEditState(),this.toastr.success("Profile updated"),this.userService.user=s})}deleteUser(){this.dialog.open(f.a,{data:{size:"md",title:"Delete account",primaryLabel:"Delete",content:"Deleting your account will result in loss of your profile, and all of your childrens data will be lost forever<br><br>Do you want to continue?"}}).afterClosed().pipe((0,u.q)(1),(0,g.h)(s=>s),(0,m.zg)(()=>this.userService.delete(this.userService.user))).subscribe(()=>{this.userService.signOut(),this.toastr.success("Account has been deleted")})}samePassValidator(){return s=>{var o;const a=null===(o=s.parent)||void 0===o?void 0:o.value;return(null==a?void 0:a.newPassword)===s.value?null:{noMatch:!0}}}}return e.\u0275fac=function(s){return new(s||e)(t.Y36(r.qu),t.Y36(h._),t.Y36(v.K),t.Y36(b.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ae-settings"]],viewQuery:function(s,o){if(1&s&&(t.Gf(S,5),t.Gf(y,5)),2&s){let a;t.iGM(a=t.CRH())&&(o.box=a.first),t.iGM(a=t.CRH())&&(o.passBox=a.first)}},decls:23,vars:12,consts:[[1,"d-flex","justify-between","align-center"],[1,"heading-1"],["title","Profile",3,"editable","saveCallback","form"],["box",""],["box-content",""],[1,"ac-form-control"],["for","email"],[1,"ac-label-span"],[4,"ngIf","ngIfElse"],["preview",""],["title","Change password",3,"editable","saveCallback","form"],["passBox",""],["editPassword",""],["buttonType","primary","buttonIconName","delete","text","Delete account",3,"full","click"],["label","name",3,"control"],["label","Current password","inputType","password","inputId","curr-pass",3,"min","control"],["label","New password","inputType","password","inputId","new-pass",3,"min","control"],["label","Repeat password","inputType","password","inputId","repeat-pass",3,"min","control"]],template:function(s,o){if(1&s&&(t.TgZ(0,"section",0),t.TgZ(1,"h1",1),t._uU(2,"Settings"),t.qZA(),t.qZA(),t.TgZ(3,"ae-box",2,3),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"label",6),t.TgZ(8,"span",7),t._uU(9,"Email"),t.qZA(),t.qZA(),t._UZ(10,"br"),t.TgZ(11,"span"),t._uU(12),t.qZA(),t.qZA(),t.YNc(13,C,2,1,"ng-container",8),t.YNc(14,T,5,1,"ng-template",null,9,t.W1O),t.qZA(),t.qZA(),t.TgZ(16,"ae-box",10,11),t.TgZ(18,"div",4),t.YNc(19,A,2,0,"p",8),t.YNc(20,G,3,6,"ng-template",null,12,t.W1O),t.qZA(),t.qZA(),t.TgZ(22,"ae-button",13),t.NdJ("click",function(){return o.deleteUser()}),t.qZA()),2&s){const a=t.MAs(4),l=t.MAs(15),J=t.MAs(17),Q=t.MAs(21);t.xp6(3),t.Q6J("editable",!0)("saveCallback",o.saveProfile.bind(o))("form",o.userFG),t.xp6(9),t.Oqu(o.userFG.value.email),t.xp6(1),t.Q6J("ngIf",a.isEditState)("ngIfElse",l),t.xp6(3),t.Q6J("editable",!0)("saveCallback",o.changePassword.bind(o))("form",o.passwordFG),t.xp6(3),t.Q6J("ngIf",!J.isEditState)("ngIfElse",Q),t.xp6(3),t.Q6J("full",!0)}},directives:[Z.e,p.O5,w.r,x.a],styles:["[_nghost-%COMP%]{padding-top:60px;display:block}[_nghost-%COMP%]   ae-box[_ngcontent-%COMP%]{display:block;margin-bottom:16px}"]}),e})()}];let P=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[c.Bz.forChild(M)],c.Bz]}),e})();var F=n(4675),I=n(4466);let U=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[F.W,I.m,p.ez,P]]}),e})()}}]);